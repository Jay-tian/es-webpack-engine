'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _yargs=require('yargs');var _path=require('path');var _path2=_interopRequireDefault(_path);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var parameters=_yargs.argv.parameters?require(_path2.default.resolve(_yargs.argv.parameters)):{};var specialArgv={};_yargs.argv._.forEach(function(arg){if(arg.indexOf(':')>0){var argArr=arg.split(':');specialArgv[argArr[0]]=argArr[1];}});// 配置项
var options=Object.assign({output:{path:'web/static-dist/',publicPath:'/static-dist/'},libs:{},noParseDeps:[],onlyCopys:[],global:{},externals:{jquery:'jQuery'},regExp:'',// 'react|webuploader'
minChunks:5,commonsChunkFileName:'common',entryMainName:'main',entryFileName:'index',extryCssName:'main',globalDir:'app/Resources/static-src',nodeModulesDir:'node_modules',pluginsDir:'plugins',bundlesDir:'src',themesDir:'web/themes',webDir:'web',fontlimit:1024,imglimit:1024,fontName:'fonts',imgName:'img',mediaName:'media',copyName:'img',isNeedCommonChunk:'.is-need-common-chunk',happypackTempDir:'app/cache/dev/.happypack/',openModule:['lib','app','plugin','theme','bundle'],pluginModule:[],bundleModule:[],themeModule:[]},parameters);// 绝对路径
var rootDir=_path2.default.resolve('./');var globalDir=_path2.default.resolve(rootDir,options.globalDir);var nodeModulesDir=_path2.default.resolve(rootDir,options.nodeModulesDir);var pluginsDir=_path2.default.resolve(rootDir,options.pluginsDir);var themesDir=_path2.default.resolve(rootDir,options.themesDir);var webDir=_path2.default.resolve(rootDir,options.webDir);var bundlesDir=_path2.default.resolve(rootDir,options.bundlesDir);// 是否开启相应模块
options.openModule=specialArgv.openModule?specialArgv.openModule.split(','):options.openModule;options.openPluginsModule=specialArgv.pluginModule?specialArgv.pluginModule.split(','):options.pluginModule;options.openBundlesModule=specialArgv.bundleModule?specialArgv.bundleModule.split(','):options.bundleModule;options.openThemesModule=specialArgv.themeModule?specialArgv.themeModule.split(','):options.themeModule;var isOpenModule=function isOpenModule(module){return options.openModule.indexOf(module)!==-1;};var isOpenLibModule=isOpenModule('lib');var isOpenAppModule=isOpenModule('app');var isOpenPluginModule=isOpenModule('plugin');var isOpenThemeModule=isOpenModule('theme');var isOpenBundleModule=isOpenModule('bundle');Object.assign(options,{output:{path:_path2.default.resolve(rootDir,options.output.path),publicPath:options.output.publicPath},// 开发模式
__DEBUG__:!!specialArgv.debugMode,__DEV__:process.env.NODE_ENV==='development',// 高级模式
__DEV_SERVER_PORT__:specialArgv.port||3030,__OPTIMIZE__:specialArgv.opt,__DEVTOOL__:specialArgv.devtool||'cheap-module-eval-source-map',__FILE_INFO__:specialArgv.fileInfo,rootDir:rootDir,globalDir:globalDir,nodeModulesDir:nodeModulesDir,pluginsDir:pluginsDir,themesDir:themesDir,bundlesDir:bundlesDir,webDir:webDir,isOpenLibModule:isOpenLibModule,isOpenAppModule:isOpenAppModule,isOpenPluginModule:isOpenPluginModule,isOpenBundleModule:isOpenBundleModule,isOpenThemeModule:isOpenThemeModule});exports.default=options;